## Steps
* [Setup MFA](aka.ms/mfasetup)


## Micrososft Azure
* [Learn free Azure 1](https://docs.microsoft.com/en-us/learn/modules/welcome-to-azure/)
* [Learn free Azure 2](https://docs.microsoft.com/en-us/learn/paths/administer-infrastructure-resources-in-azure/)
* [Azure free Account](https://azure.microsoft.com/en-us/offers/ms-azr-0044p/)
* [Azure pricing calculator](https://azure.microsoft.com/en-us/pricing/calculator/)
* [Microsoft Azure Cost Estimator Tool](https://www.microsoft.com/en-ca/download/details.aspx?id=43376)
* [How I choose which services to use in Azure](https://channel9.msdn.com/Shows/Azure-Friday/How-I-choose-which-services-to-use-in-Azure)
* [Azure PowerShell – Cross-platform “Az” module replacing “AzureRM”](https://azure.microsoft.com/en-us/blog/azure-powershell-cross-platform-az-module-replacing-azurerm/)
* [Azure AD Domain Services Documentation](https://docs.microsoft.com/en-us/azure/active-directory-domain-services/)
* [Can someone explain Azure's "database-as-a-service " to me?](https://www.reddit.com/r/sysadmin/comments/9dvuej/can_someone_explain_azures_databaseasaservice_to/)
* [Role-based access control documentation](https://docs.microsoft.com/en-us/azure/role-based-access-control)
* [Self-paced Labs](https://www.microsoft.com/handsonlabs/selfpacedlabs)

## Azure AD Connect
* [Azure AD Connect](https://www.reddit.com/r/sysadmin/comments/a61gub/azure_ad_connect/)
* [Integrate your on-premises directories with Azure Active Directory](https://docs.microsoft.com/en-us/azure/active-directory/connect/active-directory-aadconnect)
* [Azure Active Directory Seamless Single Sign-On](https://docs.microsoft.com/en-us/azure/active-directory/connect/active-directory-aadconnect-sso)
* [Azure AD Connect - Re-installation of this service safe?](https://www.reddit.com/r/sysadmin/comments/910kzi/azure_ad_connect_reinstallation_of_this_service/)
* [Azure Monitor: Route AAD Activity Logs using diagnostic settings](https://azure.microsoft.com/en-us/blog/azure-monitor-aad-activity-logs-using-diagnostic-settings/)

## Azure general
* [Remote access to on-premises applications through Azure Active Directory's Application Proxy](https://docs.microsoft.com/en-us/azure/active-directory/manage-apps/application-proxy)
* [Premium Block Blob Storage - a new level of performance](https://azure.microsoft.com/en-us/blog/premium-block-blob-storage-a-new-level-of-performance/)
* [Considering Azure Functions for a serverless data streaming scenario](https://azure.microsoft.com/en-us/blog/considering-azure-functions-for-a-serverless-data-streaming-scenario/)
* [Manage emergency-access administrative accounts in Azure AD](https://docs.microsoft.com/en-us/azure/active-directory/users-groups-roles/directory-emergency-access)
* [Leverage Azure Security Center to detect when compromised Linux machines attack](https://azure.microsoft.com/en-us/blog/leverage-azure-security-center-to-detect-when-compromised-linux-machines-attack/)
* [Workload insights into SQL Data Warehouse delivered through Microsoft Azure Monitor diagnostic logs](https://azure.microsoft.com/en-us/blog/workload-insights-with-sql-data-warehouse-delivered-through-azure-monitor-diagnostic-logs-pass/)
* [Row-Level Security is now supported for Microsoft Azure SQL Data Warehouse](https://azure.microsoft.com/en-us/blog/row-level-security-is-now-supported-for-azure-sql-data-warehouse/)
* [Automatically discover workload insights for advanced performance tuning directly in Azure portal](https://azure.microsoft.com/en-us/blog/automatically-discover-workload-insights-for-advanced-performance-tuning-directly-in-the-azure-portal/)
* [Validating Azure Run As accounts in Micrososft Azure](http://techgenix.com/validating-azure-run-as-accounts/)
* [Best practices for alerting on metrics with Azure Database for MySQL monitoring](https://azure.microsoft.com/en-us/blog/best-practices-for-alerting-on-metrics-with-azure-database-for-mysql-monitoring/)
* [Who has switched from ADFS to Azure SSO? Why? How was the transition? How has it worked so far?](https://www.reddit.com/r/sysadmin/comments/9rd3e5/who_has_switched_from_adfs_to_azure_sso_why_how/)
* [Azure Advisor](https://azure.microsoft.com/en-us/blog/new-recommendations-in-azure-advisor/)
* [Azure management groups now in general availability](https://azure.microsoft.com/en-us/blog/azure-management-groups-now-in-general-availability/)
* [Managed Disks migration now available in the Azure Portal](https://azure.microsoft.com/en-us/blog/managed-disks-migration-portal/)
* [Azure Block Blob Storage Backup](https://azure.microsoft.com/en-us/blog/microsoft-azure-block-blob-storage-backup/)
* [Azure AD Activity Logs in Azure Monitor Diagnostics now in public preview](https://cloudblogs.microsoft.com/enterprisemobility/2018/07/26/azure-ad-activity-logs-in-azure-monitor-diagnostics-now-in-public-preview/)
* [Is there a way to send an alert (email) when a device joins Azure AD?](https://www.reddit.com/r/sysadmin/comments/9djadq/is_there_a_way_to_send_an_alert_email_when_a/)
* [Get notified when your Azure resources become unavailable](https://azure.microsoft.com/en-us/blog/get-notified-when-your-azure-resources-become-unavailable/)
* [Renew federation certificates for Office 365 and Azure Active Directory](https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-fed-o365-certs)
* [Assign licenses to users by group membership in Azure Active Directory](https://docs.microsoft.com/en-us/azure/active-directory/users-groups-roles/licensing-groups-assign)
* [Azure as a second DC?](https://www.reddit.com/r/sysadmin/comments/9w3w2n/azure_as_a_second_dc/)
* [Four operational practices Microsoft uses to secure the Azure platform](https://azure.microsoft.com/en-us/blog/four-operational-practices-microsoft-uses-to-secure-the-azure-platform/)
* [Five lessons for building your roadmap to a secure hybrid cloud future](https://azure.microsoft.com/en-us/blog/five-lessons-for-building-your-roadmap-to-a-secure-hybrid-cloud-future/)

## Azure Powershell
* [Azure and Windows PowerShell: The Basics](https://www.red-gate.com/simple-talk/sysadmin/powershell/azure-windows-powershell-basics/)
* [Azure and Windows PowerShell: Getting Information](https://www.red-gate.com/simple-talk/sysadmin/powershell/azure-and-windows-powershell-getting-information/)
* [Create Azure VMs with PowerShell Part 1](https://www.red-gate.com/simple-talk/sysadmin/powershell/create-azure-vms-powershell-part-1/)
* [Create Azure VMs with PowerShell Part 2](https://www.red-gate.com/simple-talk/sysadmin/powershell/create-azure-vms-powershell-part-2/)

## SSO
* [Azure Active Directory Seamless Single Sign-On](https://docs.microsoft.com/en-us/azure/active-directory/connect/active-directory-aadconnect-sso)
* [Overview of Single Sign-On](https://azure.microsoft.com/en-us/resources/videos/overview-of-single-sign-on/)
* [What is application access and single sign-on with Azure Active Directory?](https://docs.microsoft.com/en-us/azure/active-directory/manage-apps/what-is-single-sign-on)

## Others
* [Managing Linux VM Authentication in Micrososft Azure](http://techgenix.com/managing-linux-vm-azure/).

### Active Directory Azure configuration information
* Azure Virtual Networks can be configured to use DCs for DNS services
* Update the Virtual Network DNS to use Azure based DCs first
* Make at least one DC in Azure a Global Catalog
* Create if possible multiple DCs in Azure if one's being maintained
* If placing multiple DCss in Azure deploy them in an Availability Set
* Generally RODC is NOT a good fit for Azure (Apps don't work very well and there is traffic)

##### Site Configuration
* In Active Directory Sites and Services configure each Azure region to be its own Active Directory site
* If you're using multiple regions, then make sure that is visible within the name
* Define the IP subnets that are being used for that site, so you have a site to subnet link
* At the Inter-Site Transport configure a site link between a location which is physically connected to Azure.

##### Database placement within an Azure based domain controller
* Add/Create a new data disk to the Azure based DC with with NO caching NO read NO write (Host Caching: None)
* When running DC Promo configure the NTDS and SYSVOl to be placed on this data disk
* Dont store the NTDS and SYSVOL on the OS drive

##### IP reservation and network configuration
* Assign a reserved IP static address to the DC using Azure Configuration

##### Generic DNS record suppression
* To supress the creation og generic DNS records you can read about this article:
[How to optimize the location of a domain controller or global catalog that resides outside of a client's site](https://support.microsoft.com/en-us/help/306602/how-to-optimize-the-location-of-a-domain-controller-or-global-catalog)

### Enabling Cloud Service Relationships with Federation
* Managing identity
* Provisioning and deprovisioning accounts
* Identifying cloud services used within an organization
* Managing federations
* Reporting and auditing
* Providing a simple user experience
* Account STS / Resources STS (STS stand for Security Token Service)
* Choice of sign-in of WS-Fed, OAuth or SAML, which one to use depends on the application or vendor
* Use a dedicated server for Azure AD Connect if possible
* After configuring Azure AD Connect open the Synchronization Service to configure which OU's to sync. This can be done by going to the Connectors and select the AD and go to Configure Directory Parititions and then Containers
* Running a "C:\Program Files\Microsoft Azure AD Sync\Bin\DirectorySyncClientCmd.exe delta [LearnCompany.LTD]". This will for a synchronization the easiest way between AD and Azure AD.
* Authentication Options below:
1. Authentication Option 1: AD DS > Identity sync with password hash > Microsoft Azure AD
2. Authentication Option 2: AD DS > Identity Sync with ADFS > Micrososft Azure AD < Best option
* [Azure AD Connect and federation](https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-fed-whatis)
* [Manage AD FS trust with Azure AD using Azure AD Connect](https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-azure-ad-trust)

### Discovery Cloud Applications Used in Your Organization
* Azure AD Cloud App Discovery is a feature of Azure AD premium, and lets you install an agent on devices. It will run in the background and search for services which are users are using. This is based on HTTP or HTTPS, if the application/services does not use HTTP or HTTPS the application won't be discoverd.
* Informing the organization that you are going to collect this information is optional. Can be specific at the donwload part of the agent.
* [Cloud App Discovery System Center Deployment Guide](https://social.technet.microsoft.com/wiki/contents/articles/30968.cloud-app-discovery-system-center-deployment-guide.aspx)
* [Cloud App Discovery Group Policy Deployment Guide](https://social.technet.microsoft.com/wiki/contents/articles/30965.cloud-app-discovery-group-policy-deployment-guide.aspx)
* It will create an server on the devices named: Micrososft Cloud App Discovery Endpoint Agent
* Within Azure AD you will get a report about the information which Applications are being used. Do know that there will be noise on this report, since it will report also applications which you have never used. But this application probaly fetches some information which causes to show up in the repot.
* With a filter you can change the ammount of days its showing

### Reports
* [What are Azure Active Directory reports?](https://docs.microsoft.com/en-us/azure/active-directory/reports-monitoring/overview-reports)

### Storage
* Persistent vs Non-Persistent, most of the time you will choice for persistent
* Persistent: able to write data / power off a system and bring online and the data still is there / move virtual machines between nodes, and its storage is always there.
* Non-Persistent: Think of a temporary disk while rebooting it stays there, but shut it down and then start it again you will lose it.
* Other considerations: Durability. Resiliency, Performances, Connectivity, File- vs Block-based
* [Windows Azure Storage: A Highly Available Cloud Storage Service with Strong Consistency](https://sigops.org/s/conferences/sosp/2011/current/2011-Cascais/printable/11-calder.pdf)

### Azure Storage offerings
* Storage Services available: StorSimple, Azure Backup, Azure SQL Database, content delivery networks and media services.
* Storage Services type: Blobs (in containers as block or page). Blob is also know as object storage), is unstructured object data.
* Storage Services types Tables (which have entities with field:value properties to NoSQL with no fixed schema), is structured data.
* Storage Services type: Queues (which have messages)
* Storage Services type: Files (via SMB shares)
* For infrastructure the big focus is on page blobs

### Azure Regions
* Storage Stamps are deployed to datacenters which live in an Azure Region
* An Azure Region has many datacenters that are wiithin a latency boundary
* There are Azure Regeions throughout the globe and more are added every year 
* Regions are paired for geo-redundant storage replication

### ASM (Azure Service Manager) / ARM ( Azure Resources Manager)
* Focus is on ARM as that is the new model for Azure that has support for RBAC, JSON templates, dependencies, tags. granular bullying and hybrid consistency via Azure Stack
* Cannot mix resources, if you still want that it needs to be through VPNs or Express Route or something else. So this is why use possible ARM for all deployments.

### Storage Accounts
* Every storage account has a globally-unique name throughtout the hole Azure Space
* Alle DNS names for specific types of service like blobs,queues, tables has also an unique name throughout the hole Azure space
* Account Types: General Purpose > general purpose accounts have a performance type
* Account Types: Blob storage > blob storage accounts are hot or cold tier, and these do not support page blobs, so I cannot use these for IaaS.
* Hot tier storage explained: I would use for data that I intend to access more. For a hot storage blob account I pay a certain amount for the storage, and a certain amount to access transactions.
* Cold tier storage explained: Very good for storing data I don't intend to access very often. For a cold storage account, the actual cost of storing data is about half of that of the hot tier, but the actual transactions frees are double that of the hot tier.
* Like all Azure Resource Manager (ARM)) resources, storage accounts are in a Resource Group
* Storage Account Replication types: Locally-redundant storage (LRS): Locally redundant storage. Locally redundant storage (LRS) replicates three copies of your data within the same data center you have your data in. The write requests you do with your storage are not committed until they are replicated to all three copies, which means it replicates synchronously.
* Storage Account Replication types: Zone-redundant storage (ZRS): When you store your data in a storage account using ZRS replication, you can continue to access and manage your data if an availability zone becomes unavailable. ZRS provides excellent performance and low latency. ZRS offers the same scalability targets as locally redundant storage (LRS)
* Storage Account Replication types: Geo-redundant storage (GRS): Geo-redundant storage (GRS) is designed to provide at least 99.99999999999999% (16 9's) durability of objects over a given year by replicating your data to a secondary region that is hundreds of miles away from the primary region. ... Read-access geo-redundant storage (RA-GRS) is based on GRS.
* Storage Account Replication types: Read-access geo-redundant storage (RA-GRS): Read-access geo-redundant storage (RA-GRS) maximizes availability for your storage account. RA-GRS provides read-only access to the data in the secondary location, in addition to geo-replication across two regions.

### Standard Storage
* Also referred to as Basic storage
* Baed on storage stamps primarily using HDDs
* VHD files are stored in page blobs
* A page blob has a 1 TB maximum size
* 500 Maximum IOPS per disk for Standard tier VM (300 IOPS for Basic)
* Up to 20.000 IOPS per Standard storage account
* Always stick to 40 disks maximum in a storage account
* The maximum size of a VHD is 1023 GB (overhead for 1GB)

### Bigger and Faster Standard Storage
* 500 IOPS and 1TB will not always be enough
* One option: Add multi disks then combine
* The combined volume has the aggregate size and performance. Combining 8 disk would enable 8 TB volume with 4000 IOPS.
* When combining no mirroring or parity is required
* Use simple virtual disks with storage space or RAID 0/striping
* Applications may have their own technologies such as SQL Server

### Pricing of Standard Storage
* Like all Azure services the storage is billed based on consumption and the type of service
* Items that impact the price: Capacity, how much data I'm actually storing
* Items that impact the price: Tier, this could be hot and cold or more about the Standard vs Premium
* Items that impact the price: Redundancy, is it (LRS) or/and (ZRS) or/and  (GRS) or/and (RA-GRS)
* Items that impact the price: Transactions, how many transactions are you performing against the storage
* Items that impact the price: Region, prices do vary based on the region

### Understanding Sparse Storage and Trim in Azure Storage
* Uses fixed size VHDs where the size of the VHD is provisioned at creation time.
* You pay for what you consume which would typically mean creating the smallest VHD that meets your need.
* Azure Storage uses sparse storage on the back end and also supports trim type operations. Therefor if your 1 TB VHD only 50 MB of data stored in it then only 50 MB of Azure Storage is actually used and therefor you pay for the 50 MB only. Not the same for Premium Storage. You only pay for the data you write to it, you pay for what you consume.

### Resizing Disks
* Always create disks to the maximum size
* It is possible to resize via REST API, PowerShell and the portal
* If used by a VM the VM must be deallocated from the fabric
* Once increased in size extend the volume inside the OS

### Azure Premium Storage
* A separate set of storage stamps based on SSD primarily with additional network connectivity
* Higher IOPS per disk
* Predictable IOPS rather than simply a possible maximum, there is a guareantee 
* Currently available as LRS "availability only"
* For Azure VM disks "only"
* Not sparse storage
* Cost based on the disk size not the data you write

### Using Premium Storage
* Premium storage can only be used by specific VM series: DS, DSv2, GS and FS
* Sepearate compute stamps with specific network connectivity
* Less temporay storage as its used for caching purposes
* Up to 80.000 IOPS and 2000 MB per second throughput per VM output
* VM can use a mix of standard and premium storage

### Practices for Azure Storage
* Keep track of disks per storage account (500 IOPS per disk, 20.000 per storage account, above 40 disks then occurs throtteling)
* Uses consisstent naming schemes for account and disks
* For disks ensure its easy to relate which VM is using the disk
* Storage and compute most be in the same region
* Use multiple disks to increase IOPS without increasing cost for storage standard storage (not the case for premium storage)
* Don't forget to backup your data

### Caching
* Three types of caching: No caching
* Three types of caching: Read caching
* Three types of caching: Read and write caching
* OS Disk - [ Read ] and [ write ] caching ( ARM,ASM R or RW)
* Data Disks - [ Read ] and [ write ] caching
* Many applications are sensitive to caching
* Application data should be stored on data disks, never the OS disk
* Temporary Drive: A series = HDD
* Temporary Drive: D, DG, G, GS series: = SSD
* Content is lost any time VM is reprovisioned to fabric (stop, start, resize)
* Temporary drive is only used by the pagefile.sys
* Should be used as a scratc drive, e.g. TempDB, Buffer Pool Extensions (SQL Server 2014)
* May need special steps to create content on temp if needed by applications
* [Using SSDs in Azure VMs to store SQL Server TempDB and Buffer Pool Extensions](https://cloudblogs.microsoft.com/sqlserver/2014/09/25/using-ssds-in-azure-vms-to-store-sql-server-tempdb-and-buffer-pool-extensions/)
* Temporary Drive Letter is D by default, can be changed through a few laps
* [Use the D: drive as a data drive on a Windows VM](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/change-drive-letter)

### Azure Files
* Provides and SMB 2.1 and 3.0 file share in Azure
* Usable within the Azure and externalyl via SMB 3 and port 445 is open to the internet
* Provies a shared file storage in Azure
* Can be mapped using standard SMB clients

### Encryption
* By default data is not encrypted at rest
* Best option is for you to own the encryption either through the application (e.g. SQL) or the OS
* Data at rest encryption is possible
* Third-party solutions exist for VM encryption
* Azure has native Windows and Linux encryption using BitLocker and DM-Crypt respectively
* Integrates with Azure Key Vault for key storage

### Other Storage in Azure
* Can use other types of virtual storage appliance in Azure via iSCSI or other IP based protocols
* It is not possible to place your own equipment at Azure Datacenters
* Using storage solutions on-premises from Azure would likely have latencies that were too high, even via ExpressRoute to be performant
* There are certain partnerships with ExpressRoute service providers to host storage solutions at their locations that can be used in Azure with very latencies.

### Storage Account Keys
* Two keys are provided; a primary and a secondary
* This enables a key to be changed without interruption to access
* keys should be protected and reset if compromised
* Can be accessed through the portal, powershell and rest
* It's possible to build complete solutions to store, roll and access

### Managing Azure with GUI
* CloudXplorer tool
* Micrososft Azure Storage Explorer

### Snapshots
* There is no VM checkpoint capability in Azure
* It is possible to perform blob snapshots which would not integrate with VSS inside the VM
* Through Powershell can create a solution that creates and reverts to snapshots as required
* Snapshots cannot outlive the source blob
* Can copy snapshots to other locations
* Consider Azure Backup or Caputure VM
* [Using snapshots with Azure IaaS VMs](https://www.youtube.com/watch?v=WP7-96KQJl0)

### Server-side Copy
* Possible to copy via client resulting in slow operation and egress charges
* When moving or copying large amounts of data between storage account can use Azure server-side asynchronous copy
* When copied between accounts in same region no egress charges
* Copy across subscriptions and regions
* Use PowerShell, AzCopy or other utilities

### StorSimple
* Store data in Azure
* Provides an on-premises storage appliance that utilizes the cloud providing "infinite" storage
* iSCSI > StorSimple > First SSD, then HDD and then it goes to Azure.
